---
description: Rules for writing tests (Mocks vs Hardware)
globs: tests/**/*.py
alwaysApply: false
---
# Testing Rules

## Testing Philosophy

- **Unit tests**: Desktop-only, fully mocked, run in pre-commit (fast feedback)
- **Integration tests**: Device-only, real hardware validation (run sparingly)

## Critical Rules

- **No Hardware Imports**: NEVER import `board` or `microcontroller` in unit tests.
- **Use Mocks**: Use `tests.test_helpers` factory functions for hardware simulation.
- **Local Execution**: Unit tests run via `python tests/run_tests.py` without hardware.
- **Pre-commit Integration**: All unit tests must pass before code can be committed.

## Reference
- `tests/README.md` - Complete testing documentation, TDD workflow, and best practices
- `docs/PATTERNS_COOKBOOK.md` - Testing with Mocks section with code examples
