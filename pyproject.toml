[tool.ruff]
line-length = 120
src = ["src", "tests"]
exclude = ["src/lib"]

[tool.ruff.lint]
# Enforce a broad set of rules, then selectively ignore.
# See all rules: https://docs.astral.sh/ruff/rules/
select = [
    "E",  # pycodestyle errors
    "W",  # pycodestyle warnings
    "F",  # pyflakes
    "I",  # isort
    "UP", # pyupgrade
    "B",  # flake8-bugbear
    "C4", # flake8-comprehensions
    "SIM",# flake8-simplify
]
ignore = [
    "E501", # Line too long (handled by ruff-format)
]

[tool.ruff.format]
quote-style = "double"

[tool.mypy]
python_version = "3.13"
warn_unused_configs = true

# Project structure
files = ["src", "tests"]
mypy_path = "src"
exclude = "src/lib/"

# Be strict, but accommodate the CircuitPython environment
disallow_untyped_defs = true
disallow_incomplete_defs = true
no_implicit_optional = true
warn_redundant_casts = true
warn_unused_ignores = false

# CircuitPython libraries often lack type stubs.
# This is the most important setting for a CP project.
ignore_missing_imports = true

[tool.pylint]
# Pylint runs in a CPython environment where CircuitPython-only modules
# (e.g., `wifi`, `board`, `neopixel`) are not importable. Treat these as
# known external dependencies rather than real import errors.
ignored-modules = [
    "adafruit_hashlib",
    "adafruit_httpserver",
    "adafruit_ntp",
    "adafruit_requests",
    "board",
    "digitalio",
    "microcontroller",
    "neopixel",
    "rtc",
    "socketpool",
    "ssl",
    "storage",
    "supervisor",
    "usb_cdc",
    "wifi",
]

[tool.vulture]
paths=["src"]
exclude=["src/lib", "src/core/app_typing.py", "*_mocks.py", "__init__.py"]
